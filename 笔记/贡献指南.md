# Ant Design 贡献指南

## 🚀 开始贡献

### 环境准备

#### 1. 克隆项目

```bash
git clone https://github.com/ant-design/ant-design.git
cd ant-design
```

#### 2. 安装依赖

```bash
npm install
# 或者使用 yarn
yarn install
# 或者使用 pnpm
pnpm install
```

#### 3. 启动开发环境

```bash
npm start
# 访问 http://localhost:8001
```

#### 4. 运行测试

```bash
npm test
```

## 📝 贡献类型

### 1. 文档改进 (推荐新手)

- 修复文档中的错别字
- 改进示例代码
- 添加缺失的 API 说明
- 翻译文档

### 2. Bug 修复

- 修复组件 bug
- 解决兼容性问题
- 修复样式问题
- 解决性能问题

### 3. 功能增强

- 添加新功能
- 优化现有功能
- 改进用户体验
- 添加新的组件

### 4. 测试补充

- 添加单元测试
- 添加集成测试
- 添加视觉回归测试
- 提高测试覆盖率

## 🔍 寻找贡献机会

### 1. 查看 Issue

- [Good First Issue](https://github.com/ant-design/ant-design/issues?q=is%3Aopen+is%3Aissue+label%3A%22good+first+issue%22)
- [Help Wanted](https://github.com/ant-design/ant-design/issues?q=is%3Aopen+is%3Aissue+label%3A%22help+wanted%22)
- [Bug](https://github.com/ant-design/ant-design/issues?q=is%3Aopen+is%3Aissue+label%3Abug)

### 2. 查看 PR

- [Draft PR](https://github.com/ant-design/ant-design/pulls?q=is%3Aopen+is%3Apr+draft%3Atrue)
- [需要 Review 的 PR](https://github.com/ant-design/ant-design/pulls?q=is%3Aopen+is%3Apr+review%3Arequired)

### 3. 关注讨论

- [RFC](https://github.com/ant-design/ant-design/issues?q=is%3Aopen+is%3Aissue+label%3ARFC)
- [Feature Request](https://github.com/ant-design/ant-design/issues?q=is%3Aopen+is%3Aissue+label%3A%22feature+request%22)

## 🛠️ 开发流程

### 1. 创建分支

```bash
# 从 master 分支创建新分支
git checkout master
git pull origin master
git checkout -b feat/your-feature-name
# 或者
git checkout -b fix/issue-description
```

### 2. 开发代码

- 遵循项目的代码规范
- 编写测试用例
- 更新相关文档
- 确保所有测试通过

### 3. 提交代码

```bash
# 添加文件
git add .

# 提交代码 (遵循提交规范)
git commit -m "feat: add new feature"
git commit -m "fix: resolve button style issue"
git commit -m "docs: update button documentation"
```

### 4. 推送分支

```bash
git push origin feat/your-feature-name
```

### 5. 创建 Pull Request

- 使用项目提供的 PR 模板
- 详细描述改动内容
- 添加相关测试
- 确保 CI 通过

## 📋 代码规范

### 1. TypeScript 规范

```typescript
// 使用 interface 定义 props
interface ButtonProps {
  type?: ButtonType;
  size?: SizeType;
  disabled?: boolean;
  children?: React.ReactNode;
}

// 使用 type 定义联合类型
type ButtonType = 'primary' | 'default' | 'dashed' | 'link' | 'text';

// 使用泛型提高类型安全
const Button = React.forwardRef<HTMLButtonElement, ButtonProps>((props, ref) => {
  // 组件实现
});
```

### 2. React 规范

```typescript
// 使用函数式组件
const Button: React.FC<ButtonProps> = (props) => {
  // 组件实现
};

// 使用 Hooks
const [loading, setLoading] = useState(false);
const buttonRef = useRef<HTMLButtonElement>(null);

// 使用 useMemo 和 useCallback 优化性能
const buttonClass = useMemo(() => {
  return classNames(prefixCls, className, {
    [`${prefixCls}-${type}`]: type,
    [`${prefixCls}-${size}`]: size,
  });
}, [prefixCls, className, type, size]);

const handleClick = useCallback((e: React.MouseEvent) => {
  // 处理点击事件
}, []);
```

### 3. 样式规范

```typescript
// 使用 CSS-in-JS
const useStyle = (prefixCls: string) => {
  const { theme } = useToken();

  return useMemo(() => {
    const hashId = hashId();

    return [hashId, `${prefixCls}-${hashId}`];
  }, [prefixCls, theme]);
};
```

### 4. 测试规范

```typescript
// 单元测试
describe('Button', () => {
  it('should render correctly', () => {
    const { container } = render(<Button>Test</Button>);
    expect(container.firstChild).toMatchSnapshot();
  });

  it('should handle click event', () => {
    const onClick = jest.fn();
    const { getByRole } = render(<Button onClick={onClick}>Click me</Button>);

    fireEvent.click(getByRole('button'));
    expect(onClick).toHaveBeenCalled();
  });
});
```

## 🎯 提交规范

### 1. 提交信息格式

```
<type>(<scope>): <subject>

<body>

<footer>
```

### 2. Type 类型

- `feat`: 新功能
- `fix`: 修复 bug
- `docs`: 文档更新
- `style`: 代码格式调整
- `refactor`: 代码重构
- `test`: 测试相关
- `chore`: 构建过程或辅助工具的变动

### 3. 示例

```bash
git commit -m "feat(button): add loading state support"
git commit -m "fix(table): resolve column alignment issue"
git commit -m "docs(form): update validation examples"
```

## 🔧 工具使用

### 1. 代码检查

```bash
# 运行 ESLint
npm run lint:script

# 运行 Biome
npm run lint:biome

# 运行 TypeScript 检查
npm run tsc
```

### 2. 代码格式化

```bash
# 使用 Prettier
npm run prettier

# 使用 Biome
npm run biome
```

### 3. 测试

```bash
# 运行所有测试
npm test

# 运行特定测试
npm test -- --testNamePattern="Button"

# 更新快照
npm run test:update
```

### 4. 构建

```bash
# 编译 TypeScript
npm run compile

# 构建生产版本
npm run dist
```

## 📚 学习资源

### 1. 项目文档

- [贡献指南](https://github.com/ant-design/ant-design/blob/master/CONTRIBUTING.md)
- [开发指南](https://github.com/ant-design/ant-design/blob/master/docs/react/develop-style.zh-CN.md)
- [设计规范](https://ant.design/docs/spec/introduce)

### 2. 技术文档

- [React 文档](https://react.dev)
- [TypeScript 手册](https://www.typescriptlang.org/docs)
- [Jest 测试框架](https://jestjs.io/docs/getting-started)

### 3. 社区资源

- [GitHub Discussions](https://github.com/ant-design/ant-design/discussions)
- [Stack Overflow](https://stackoverflow.com/questions/tagged/antd)
- [Discord 社区](https://discord.gg/antd)

## 🎉 贡献奖励

### 1. 贡献者徽章

- 贡献者会在 README 中显示
- 获得项目维护者认可

### 2. 学习机会

- 接触大型开源项目
- 学习最佳实践
- 提升技术能力

### 3. 社区认可

- 在技术社区建立声誉
- 获得职业发展机会
- 参与技术会议

## 🚨 注意事项

### 1. 代码质量

- 确保代码符合项目规范
- 编写充分的测试用例
- 考虑性能和可访问性

### 2. 沟通交流

- 在 Issue 中详细描述问题
- 在 PR 中说明改动原因
- 积极回应 Review 意见

### 3. 持续学习

- 关注项目更新
- 学习新技术
- 参与社区讨论

---

**记住**: 贡献开源项目是一个学习和成长的过程。保持耐心，专注于代码质量，积极参与社区讨论。
