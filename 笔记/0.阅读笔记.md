# ant-design 阅读笔记

- 使用 pnpm 作为包管理工具

```shell
pnpm run tsx
pnpm install cross-env
```

1. - [] 了解文件

### 方式二：使用在线开发环境

访问 [opensumi.run](https://opensumi.run/ide/ant-design/ant-design) 进行在线开发

## 3. 安装依赖

### 使用 npm（推荐）

```bash
npm install
```

### 使用其他包管理器

```bash
# 使用 yarn
yarn install

# 使用 pnpm
pnpm install

# 使用 bun
bun install
```

### 注意事项

- antd 项目不使用锁文件（package-lock.json、yarn.lock 等）
- 依赖版本使用 `~` 前缀，允许 patch 版本自动更新
- 如果遇到依赖问题，可以清理后重新安装：
  ```bash
  git clean -fdx
  npm install
  ```

## 4. 启动开发服务器

### 启动开发环境

```bash
npm start
```

### 启动过程说明

启动命令会执行以下步骤：

1. `npm run version` - 生成版本信息
2. `npm run token:statistic` - 收集 token 统计信息
3. `npm run token:meta` - 生成 token 元数据
4. `npm run lint:changelog` - 检查 changelog
5. 启动 dumi 开发服务器

### 访问地址

启动成功后，在浏览器中访问：http://127.0.0.1:8001

## 5. 其他常用命令

### 构建相关

```bash
# 编译代码
npm run compile

# 构建生产版本
npm run build

# 构建文档站点
npm run site
```

### 测试相关

```bash
# 运行所有测试
npm test

# 运行测试并更新快照
npm run test:update

# 运行特定测试
npm run test:node
npm run test:site
```

### 代码质量

```bash
# 代码检查
npm run lint

# 格式化代码
npm run format

# TypeScript 类型检查
npm run tsc
```

### 开发工具

```bash
# 清理构建文件
npm run clean

# 生成 changelog
npm run changelog

# 生成作者信息
npm run authors
```

## 6. 开发流程

### 分支管理

1. 从 `master` 分支创建新分支
2. 分支命名规范：
   - `feat/xxx` - 新特性
   - `fix/xxx` - Bug 修复
   - `docs/xxx` - 文档更新
   - `refactor/xxx` - 代码重构

### 代码提交

1. 确保代码通过所有检查
2. 提交前运行测试：`npm test`
3. 遵循 Git 提交规范

### 快照测试

- 修改 demo 后可能需要更新快照：`npm run test:update`
- 快照测试确保组件输出的稳定性

## 7. 常见问题解决

### 依赖问题

```bash
# 清理并重新安装依赖
git clean -fdx
npm install
```

### 端口占用

如果 8001 端口被占用，可以修改端口：

```bash
PORT=8002 npm start
```

### 内存不足

如果遇到内存不足问题：

```bash
# 增加 Node.js 内存限制
NODE_OPTIONS='--max-old-space-size=4096' npm start
```

### 快照测试失败

1. 检查是否是预期的改变
2. 运行 `npm run test:update` 更新快照
3. 如果改变超出预期，检查依赖版本和代码同步

## 8. 项目结构说明

```
ant-design/
├── components/          # 组件源码
├── docs/               # 文档
├── scripts/            # 构建脚本
├── tests/              # 测试文件
├── .cursor/            # Cursor 编辑器配置
├── package.json        # 项目配置
└── README.md           # 项目说明
```

## 9. 开发建议

### 代码规范

- 遵循 TypeScript 规范
- 使用函数式组件和 hooks
- 遵循 antd 的命名规范
- 添加必要的测试用例

### 调试技巧

- 使用浏览器开发者工具
- 查看控制台警告和错误
- 使用 React DevTools 调试组件

### 性能优化

- 合理使用 React.memo、useMemo、useCallback
- 避免不必要的重渲染
- 注意包体积控制

## 10. 贡献指南

### 提交 PR

1. Fork 项目到自己的仓库
2. 创建功能分支
3. 提交代码并推送到自己的仓库
4. 创建 Pull Request

### 代码审查

- 确保所有 CI 检查通过
- 遵循项目编码规范
- 添加必要的测试和文档

### 发布流程

- 遵循语义化版本控制
- 更新 CHANGELOG
- 确保向后兼容性

---

通过以上步骤，你就可以成功启动 antd 项目并进行开发了。如果在过程中遇到问题，可以参考项目的 [Development 文档](https://github.com/ant-design/ant-design/wiki/Development) 或提交 Issue。
